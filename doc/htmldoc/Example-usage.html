<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for GGADT (version 1.1.1, 25 June 2015),
which calculates scattering properties of dust grains in the interstellar
medium by using anomalous diffraction theory (ADT). 

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
Texts.  A copy of the license is included in the section entitled
"GNU Free Documentation License". -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GGADT 1.1.1: Example usage</title>

<meta name="description" content="GGADT 1.1.1: Example usage">
<meta name="keywords" content="GGADT 1.1.1: Example usage">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-index.html#Concept-index" rel="index" title="Concept index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="Testing-against-previous-results.html#Testing-against-previous-results" rel="next" title="Testing against previous results">
<link href="Invoking-GGADT.html#Invoking-GGADT" rel="prev" title="Invoking GGADT">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Example-usage"></a>
<div class="header">
<p>
Next: <a href="Testing-against-previous-results.html#Testing-against-previous-results" accesskey="n" rel="next">Testing against previous results</a>, Previous: <a href="Invoking-GGADT.html#Invoking-GGADT" accesskey="p" rel="prev">Invoking GGADT</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-index.html#Concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<p>&lt;style&gt;
img {text-align:center;}
&lt;/style&gt;
</p><a name="Example-usage-1"></a>
<h2 class="chapter">4 Example usage</h2>

<a name="index-sample-output"></a>
<a name="index-examples"></a>
<a name="Default-case"></a>
<h3 class="section">4.1 Default case</h3>

<p>If you simply want to test that <code>ggadt</code> is running properly, you can simply do
</p>
<div class="example">
<pre class="example">src/ggadt
</pre></div>

<p>From the parent directory. This will solve a test case, which is defined by the default parameters set by the <code>.defaults</code> file:
</p>
<div class="example">
<pre class="example"># Default parameters used by GGADT
# ================================
# Last modified by John Hoffman (June 26, 2014)

# Geometry of grain 
# | one of: 'sphere','spheres' (or 'agglomerate'), or 'ellipsoid'
grain-geometry                 = 'ellipsoid'	

verbose                        = F
use-efficiencies               = T
use-padded-fft                 = F
integrated                     = F
do-full-2d-fft                 = F
force-numerical                = F
axes-convention                = 'ddscat'

# effective radius (radius of sphere with same volume)
aeff                           = 0.2
# Number of grid elements (along one dimension) to resolve grain
ngrain                         = 128

# IF grain-geometery=ellipsoid (these are all ratios)
grain-axis-x                   = 1.0
grain-axis-y                   = 1.0
grain-axis-z                   = 1.0

# IF grain-geometry=agglomerate
agglom-file                    = ''
agglom-composition-file        = ''

# Grain composition
# Path to material index file
# material-file                  = &quot;/Users/jah5/Desktop/Draine_temp/GGADT_JohnsMac/ggadt/data/materials/index_silD03&quot;

# parameters for differential scattering cross section calculation
# units: keV
ephot                          = 2.0
#  Re(m-1)
#ior-re                         =-1.920E-4
#  Re(m)
#ior-im                         = 2.807E-5
# | 
# | DO NOT define ior-re or ior-im if you also have defined 
# | a material-file and 'ephot'. It will pull m(E) automatically.
# |

## number of angles to calculate diff. scat. cross section (ntheta) or spacing between them (dtheta)
# (arcseconds) Choose only one of these parameters 
dtheta                         = 25.0
#nscatter                      = 100

## Maximum angle for which the diff. scat. cross section is calculated
# (arcseconds)
max-angle                      = 1500.

# IF compiled with --enable-fftw3 
fftw-optimization              = 'estimate'

#grain_axis_ratio              = 1.0

rotation-axis                  = 'none'     # For ellipsoidal or agglomerate grains
angle-mode                     = 'random'   # Either 'sequential', 'random' or 'file' 
                                            # | tells GGADT how to choose orientations over which to average
                                            # | calculations.
angle-file                     = ''         # If angle-mode='file'; Path to file listing angles
                                            # | over which to average calculations      
norientations                  = 64
											# If angle-mode is NOT 'file'; number of orientations
                                            # | over which to average calcuations
# For integrated cross section (pass --integrated flag)
# number of photon energies to calculate integrated cross sections
#nephots                       = 100
# | OR define energy spacing
dephot                         = 0.1
# minimum photon energy 		
ephot-min                      = 0.1
# maximum photon energy
ephot-max                      = 5.0
</pre></div>

<p>If you would like to plot the output of this code, pipe the standard output of <code>ggadt</code> to a file of your choice. Then run the python plotting scripts:
</p>
<div class="example">
<pre class="example">
src/ggadt &gt; output.dat
python scripts/plot.py output.dat

</pre></div>

<p>This will display two plots. One plot shows the full 2D cross-scattering efficiency. The other shows: (1) a phi-averaged plot of the differential cross-section efficiency (2) a slice of the full 2D grid at phi=0.0 and phi = pi/2 (3) the one-sigma RMS fluctuations over phi (in light green) and the max/min values over phi (in light grey).
</p>
<a name="Using-make_005fsample_005fplots_002epy"></a>
<h3 class="section">4.2 Using <code>make_sample_plots.py</code></h3>
<p>We have made a small python script (<code>scripts/make_sample_plots.py</code>) that runs example cases for different grain geometries. You will need the matplotlib, numpy and scipy libraries in order to run this script. More information about these libaries is available at <a href="http://scipy.org/getting-started.html">http://scipy.org/getting-started.html</a>.
</p>
<p>The python script runs GGADT for a grain with an effective radius of 0.2 microns, composed of MgFeSiO_4 silicate, with an incident photon energy of 2.0 keV, and with <code>ngrain</code> of 256 and a <code>nscatter</code> of 100. 
</p>
<p>The inset within the plot, on the upper left corner, shows the full 2d grid of the scattering cross section efficiency.
<img src="sample-sphere.png" height=400><br/>
<img src="sample-ellipsoid.png" height=400><br/>
<img src="sample-spheres.png" height=400><br/></p>
<a name="Ellipsoids-and-spheroids-_002d_002d-orientational-averages-about-a-principal-axis"></a>
<h3 class="section">4.3 Ellipsoids and spheroids &ndash; orientational averages about a principal axis</h3>

<p><strong>WARNING &ndash; this section is obselete, and the rotation-axis parameter should be avoided. Spinning grains will be handled in future versions of GGADT.</strong>
</p>
<p>GGADT allows you to specify a general, ellipsoidal (tri-axial) grain through the input options <code>--grain-axis-x,y,z=</code><em>val</em>. These specify the relative lengths of the three principal axes of the grain. These axes lengths are then normalized so that the effective radius of the grain is consistent with the <code>--aeff</code> parameter.
</p>
<p>If you wish to calculate orientationally-averaged quantities of a grain <em>about a principal axis</em>, GGADT allows you to do this through specifying <code>--rotation-axis=xaxis,yaxis,zaxis,none</code>. The <code>--rotation-axis</code> parameter is &rsquo;none&rsquo; by default.
</p>

<p>The <code>--rotation-axis</code> parameter will work for grain agglomerates as well. The positions of the agglomerates as specified in the agglomerate file define the coordinate system that GGADT works in. Be sure the axis you specify via <code>--rotation-axis</code> is really the axis you want. You&rsquo;ll have to know something about how the coordinate system of the agglomerate file is defined.
</p>
<p>If you are using an <code>ELLIPSOID</code> grain geometry, the coordinate system is such that the z-axis points towards the observer (i.e. the incident photons&rsquo; direction of propagation), and the x and y directions are defined by the <code>--grain-axis-x,y,z</code> input parameters. 
</p>
<p>Currently, there is no option to specify a custom rotation axis about which to orient the grain. If this is something you would like added to GGADT, let John Hoffman know.
</p>
<a name="Example-runs-for-a-prolate-spheroid"></a>
<h4 class="subsection">4.3.1 Example runs for a prolate spheroid</h4>

<p>Below are the results from running GGADT on a prolate spheroid (with axes ratios 2:1:1), with the grain&rsquo;s x-axis being the longest.
</p>
<p><strong>Orientation-averaged differential scattering efficiency about the x-axis</strong>
</p><div class="example">
<pre class="example">src/ggadt --grain-axis-y=0.5 --grain-axis-z=0.5 --grain-geometry=ellipsoid --rotation-axis=xaxis &gt; outputx.dat
python scripts/plot.py outputx.dat
</pre></div>
<img src="spheroid_rot_xaxis.png" height=400><p><strong>Orientation-averaged differential scattering efficiency about the y-axis</strong>
</p><div class="example">
<pre class="example">src/ggadt --grain-axis-y=0.5 --grain-axis-z=0.5 --grain-geometry=ellipsoid --rotation-axis=yaxis &gt; outputy.dat
python scripts/plot.py outputy.dat
</pre></div>
<img src="spheroid_rot_yaxis.png" height=400>
<p><strong>Orientation-averaged differential scattering efficiency about the z-axis</strong>
</p><div class="example">
<pre class="example">src/ggadt --grain-axis-y=0.5 --grain-axis-z=0.5 --grain-geometry=ellipsoid --rotation-axis=zaxis &gt; outputz.dat
python scripts/plot.py outputz.dat
</pre></div>
<img src="spheroid_rot_zaxis.png" height=400>
<hr>
<div class="header">
<p>
Next: <a href="Testing-against-previous-results.html#Testing-against-previous-results" accesskey="n" rel="next">Testing against previous results</a>, Previous: <a href="Invoking-GGADT.html#Invoking-GGADT" accesskey="p" rel="prev">Invoking GGADT</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-index.html#Concept-index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
