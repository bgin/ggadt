<html lang="en">
<head>
<title>Invoking GGADT - GGADT 0.9.8</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GGADT 0.9.8">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="Installation.html#Installation" title="Installation">
<link rel="next" href="Example-usage.html#Example-usage" title="Example usage">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual is for GGADT (version 0.9.8, 26 March 2014),
which calculates scattering properties of dust grains in the interstellar
medium by using anomalous diffraction theory (ADT).

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with no Front-Cover Texts,
     and with no Back-Cover Texts.  A copy of the license is included
     in the section entitled ``GNU Free Documentation License''.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Invoking-GGADT"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Example-usage.html#Example-usage">Example usage</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Installation.html#Installation">Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr>
</div>

<h2 class="chapter">3 Invoking GGADT</h2>

<p><a name="index-invoking-13"></a><a name="index-options-14"></a><a name="index-usage-15"></a><a name="index-help-16"></a>
To see usage and all available options for <code>ggadt</code>, simply use the <samp><span class="option">h</span></samp> option:

<pre class="example">     ggadt -h
</pre>
   <h3 class="section">3.1 Setting parameter values</h3>

<p>The format for running the <samp><span class="command">ggadt</span></samp> program is:

<pre class="example">     ggadt <var>option</var> ...
</pre>
   <p>With no options, <samp><span class="command">ggadt</span></samp> runs calculations on a set of default grain parameters. Parameters may be specified as command-line arguments,

<pre class="example">     ggadt --parameter=value ...
</pre>
   <p>or in a parameter file that is specified as a command-line argument,

<pre class="example">     ggadt --parameter-file-name=/path/to/parameterfile
</pre>
   <p>or a combination of the two:

<pre class="example">     ggadt --parameter-file-name=/path/to/parametefile --parameter=value ...
</pre>
   <p>If a parameter is set by a command-line argument <em>and</em> by a parameter file, the command-line argument is used.

<h3 class="section">3.2 Parameter file syntax</h3>

<p>The syntax of parameter files is:

<pre class="example">     #comment
     parameter=value
     another-parameter=another-value
     ...
</pre>
   <p><strong>Warning</strong> The <code>cluster-file-name</code> and <code>euler-file-name</code> options must be specified with quotes surrounding their values. In order to make the parameter file portable, you should specify an absolute file path, not a relative one.

   <p>E.g.:

<pre class="example">     cluster-file-name='/absolute/path/to/parameter-file.ini'
</pre>
   <p>NOT

<pre class="example">     cluster-file-name=/absolute/path/to/parameter-file.ini
</pre>
   <p>or

<pre class="example">     cluster-file-name='../../parameter-file.ini'
</pre>
   <p>Specifying a relative file-path (as in the last example) will work, as long as you always invoke GGADT from the location where the relative file-path is valid. For example, if I am in the parent directory, and my parameter file is in the <code>data/parameter-files</code> directory,

<pre class="example">     cluster-file-name='data/parameter-files/parameter-file.ini'
</pre>
   <p>will work, as long as I <strong>always</strong> run <code>ggadt</code> from the parent directory.

<h3 class="section">3.3 Options and parameters</h3>

<p><samp><span class="command">ggadt</span></samp> supports the following options:

   <p><a name="index-environment-variables_002c-help-for-17"></a>
     <dl>
<dt><samp><span class="option">--help</span></samp><dt><samp><span class="option">-h</span></samp><dd><a name="index-g_t_002d_002dhelp-18"></a><a name="index-g_t_002dh-19"></a>The `help' screen&ndash;prints usage information and available options.

     <br><dt><samp><span class="option">--version</span></samp><dt><samp><span class="option">-v</span></samp><dd><a name="index-g_t_002d_002dversion-20"></a><a name="index-g_t_002dv-21"></a>Print the version number of GGADT on
standard output and then exit successfully.

     <br><dt><samp><span class="option">--parameter-file-name=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dparameter_002dfile_002dname-22"></a>Path to a correctly formatted parameter file.

     <br><dt><samp><span class="option">--grain-geometry=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dgrain_002dgeometry-23"></a>Geometry of dust grain. Must be one of <code>SPHERE</code>, <code>ELLIPSOID</code>, <code>SPHERES</code>. A <code>SPHERES</code> grain geometry means that your grain is a conglomerate of smaller spheres. If you wish to use this grain geometry, you should supply a file (hereafter called a &ldquo;<em>cluster file</em>", see the next option) that defines the relative positions of the spheres that make up the grain. The sizes of these spheres will be normalized so that the effective radius of the grain is consistent with <samp><span class="option">aeff</span></samp>.

     <br><dt><samp><span class="option">--cluster-file-name=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dcluster_002dfile_002dname-24"></a>Path to a correctly formatted cluster file. Several cluster files are included with the distribution (see <samp><span class="file">data/clusters</span></samp>), and if you wish to create your own, you must mimic exactly the format of these files.

     <br><dt><samp><span class="option">--aeff=</span><var>value</var></samp><dd><a name="index-g_t_002d_002daeff-25"></a>Effective radius of dust grain. The effective radius is defined to be the radius of a sphere with the same volume as the dust grain.

     <br><dt><samp><span class="option">--grain-axis-x=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dgrain_002daxis_002dx-26"></a>For <code>ELLIPSOID</code> grains, we define the lengths of x, y and z axes.

     <br><dt><samp><span class="option">--grain-axis-y=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dgrain_002daxis_002dy-27"></a>
<br><dt><samp><span class="option">--grain-axis-z=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dgrain_002daxis_002dz-28"></a>
<br><dt><samp><span class="option">--ephot=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dephot-29"></a>Energy of the incident X-ray photons in keV.

     <br><dt><samp><span class="option">--sed</span></samp><dd><a name="index-g_t_002d_002dsed-30"></a>This flag tells GGADT that you would like to calculate the energy-dependent absorption and scattering cross sections. To specify the energy range that you would like the calculation done

     <br><dt><samp><span class="option">--nephots=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dnephots-31"></a>For <code>sed</code> mode, defines the number of photon energies to calculate the cross sections between <code>--ephot-min</code> and <code>--ephot-max</code>

     <br><dt><samp><span class="option">--dephot=</span><var>value</var></samp><dd><a name="index-g_t_002d_002ddephot-32"></a>For <code>sed</code> mode, defines the energy spacing between different photon energies for which the cross sections are calculated.

     <br><dt><samp><span class="option">--ephot-min=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dephot_002dmin-33"></a>For <code>sed</code> mode, defines the minimum photon energy at which the cross sections are calculated

     <br><dt><samp><span class="option">--ephot-max=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dephot_002dmax-34"></a>For <code>sed</code> mode, defines the maximum photon energy at which the cross sections are calculated

     <br><dt><samp><span class="option">--ior-re=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dior_002dre-35"></a>The real component of the complex index of refraction, minus one.

     <br><dt><samp><span class="option">--ior-im=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dior_002dim-36"></a>The imaginary component of the complex index of refraction.

     <br><dt><samp><span class="option">--material=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dmaterial-37"></a>Specifies the name of the material you're using. Currently, there are no built-in materials in GGADT, so you must use <code>--material='custom'</code>, and then specify the path to the material file by the <code>--material-file</code> argument.

     <br><dt><samp><span class="option">--material-file=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dmaterial_002dfile-38"></a>Path to file defining the energy-dependent index of refraction and dielectric constant for the grain material you would like to use. Needs to be formatted in a particular way.

     <br><dt><samp><span class="option">--ngrain=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dngrain-39"></a>The (square root) of the number of grid elements with which you would like to resolve your grain. To get accurate results out to about 4000 arcseconds, we've found that a value of 64 is good enough.

     <br><dt><samp><span class="option">--nscatter=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dnscatter-40"></a>The (square root) of the number of grid elements with which you would like to resolve the scattering cross section.

     <br><dt><samp><span class="option">--norientations=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dnorientations-41"></a>The number of grain orientations relative to the incoming X-ray photon over which to average the differential cross-section.

     <br><dt><samp><span class="option">--fftw-optimization=</span><var>value</var></samp><dd><a name="index-g_t_002d_002dfftw_002doptimization-42"></a>Must be one of <code>ESTIMATE</code>, <code>MEASURE</code>, <code>PATIENT</code> or <code>EXHAUSTIVE</code>. FFTW wisdom is saved in <code>$HOME/.ggadt/plans</code>. For more information about what these tags mean and about FFTW wisdom, see <a href="http://fftw.org/fftw3_doc/Words-of-Wisdom_002dSaving-Plans.html#Words-of-Wisdom_002dSaving-Plans">http://fftw.org/fftw3_doc/Words-of-Wisdom_002dSaving-Plans.html#Words-of-Wisdom_002dSaving-Plans</a>.

     <br><dt><samp><span class="option">--use-padded-fft</span></samp><dt><samp><span class="option">-s</span></samp><dd><a name="index-g_t_002d_002duse_002dpadded_002dfft-43"></a><a name="index-g_t_002ds-44"></a>This will force GGADT to do only one FFT. In order to provide you with the desired angular resolution of the differential cross section (set by <code>nscatter</code>), GGADT will pad the 2-d grid on which the shadow function is defined. Forcing GGADT to use a padded FFT, instead of the more efficient method without padding, will run much slower.

   </dl>

<h3 class="section">3.4 The scattering mode versus the <code>sed</code> mode</h3>

<p>By default, GGADT will determine the orientation-averaged differential scattering cross section for your grain. If, instead, you wish to calculate the absorption and (total) scattering cross sections of the grain as a function of energy, add the <code>--sed</code> flag to the command line arguments. The additional command line arguments that are relevant for the &ldquo;sed" mode are:

     <dl>
<dt><samp><code>--dephot</code><span class="option"> (or </span><code>--nephots</code><span class="option">)</span></samp><br><dt><samp><code>--ephot-min</code></samp><br><dt><samp><code>--ephot-max</code></samp><br><dt><samp><code>--material</code><span class="option">: this MUST be specified as </span><code>--material='custom'</code><span class="option"> for the time being. In the future, we'll hard-code some materials into the program so the user doesn't have to lug around a set of text files that define the energy-dependent dielectric constant for common materials.</span></samp><br><dt><samp><code>--material-file</code></samp><dd></dl>

<h4 class="subsection">3.4.1 Materials and material files</h4>

<p>The material files must be formatted in the way that GGADT expects, namely with a header of:

<pre class="example">     17 =ICOMP: amorphous olivine-like astrosilicate
         E(eV)      Re(n)-1    Im(n)    Re(eps)-1  Im(eps)
</pre>
   <p>followed by material values:

<pre class="example">     1.000000E-05  2.435E+00 1.119E-03  1.080E+01 7.688E-03
     1.240000E-05  2.435E+00 1.388E-03  1.080E+01 9.534E-03
     1.771000E-05  2.435E+00 1.982E-03  1.080E+01 1.362E-02
     2.000000E-05  2.435E+00 2.239E-03  1.080E+01 1.538E-02
     ...
</pre>
   <p><strong>Future goals</strong> :
     <ul>
<li>Allow for multiple grain compositions at once
<li>Allow for the user to specify different types of mixed compositions (layers, inclusions, solid spheroidal cores with no porosity, user-defined, etc.). Suggestions for improvement and utility are very welcome. 
<li>Allow a user-defined set of energies to calculate the cross sections
</ul>

<h3 class="section">3.5 Getting the accuracy you want</h3>

<h4 class="subsection">3.5.1 Differential scattering cross section calculations</h4>

<p>GGADT solves for either the differential scattering cross section as a function of scattering angle, or the total scattering and absorption cross sections as a function of photon energy, and must do so on a 2D numerical grid. The accuracy of the solution provided by GGADT depends on the resolution of these grids. In the case where the grain is non-spherical, the accuracy also depends on the number of orientations over which the calculation is averaged.

   <p>The input parameters that determine accuracy are:

     <ul>
<li><code>ngrain</code> &ndash; The number of grid elements (along one dimension) for which the grain is defined. 
<li><code>nscatter</code> (or equivalently <code>dtheta</code>) &ndash; The number of grid points - along one dimension - over which the differential cross section is defined, or, if using <code>dtheta</code>, the width of the grid elements (in arcseconds). 
<li><code>norientations</code> &ndash; The number of grain orientations over which to average the calculation. 
</ul>

   <p>We've done some sample runs for a spherical grain,

   <div class="block-image"><img src="RMS_ngrain_nscatter.png" alt="RMS_ngrain_nscatter.png"></div>

   <p>Accuracy results for TOTAL cross section calculations to come soon...

   </body></html>

